<!--
Soliguide: Useful information for those who need it

SPDX-FileCopyrightText: Â© 2024 Solinum

SPDX-License-Identifier: AGPL-3.0-only

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<div class="form-group my-2" *ngIf="service && service.categorySpecificFields">
  <label
    class="form-label"
    for="checklist-cat-{{ service.category }}-{{ serviceIndex }}"
  >
    {{
      CATEGORIES_SPECIFIC_FIELDS_FORM_LABEL[categorySpecificField] | translate
    }}
  </label>

  <div
    class="custom-dropdown"
    placement="bottom"
    autoClose="outside"
    ngbDropdown
  >
    <button class="btn" ngbDropdownToggle type="button">
      <span class="text-truncate fw-normal">{{ stringToDisplay }}</span>
    </button>
    <div class="dropdown-menu" ngbDropdownMenu>
      <ng-container
        *ngFor="
          let value of CATEGORIES_SPECIFIC_FIELDS_ENUM_VALUES[
            categorySpecificField
          ]
        "
      >
        <button type="button" ngbDropdownItem (click)="toggleCheckbox(value)">
          <input
            id="{{ 'specific-field-checkbox-' + value }}"
            type="checkbox"
            [checked]="
              service.categorySpecificFields[categorySpecificField]?.includes(
                value
              )
            "
            (change)="toggleCheckbox(value)"
            (click)="$event.stopPropagation()"
          />
          <label for="specific-field-checkbox-{{ value }}">
            <span (click)="toggleCheckbox(value)">
              {{ value | uppercase | translate }}
            </span>
          </label>
        </button>
      </ng-container>
    </div>
  </div>
</div>
